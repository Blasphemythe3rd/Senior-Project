<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philadelphia Pointing Span Test - Instructions</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'instructions.css' %}">
</head>

<body>
    <script>
        function handleTTSClick() {
          const img = document.getElementById("tts_image");
          const textToSpeech = `
            Test Instructions. 
            Order the numbers in ascending order, smallest to largest.
            When shown a mix of numbers and letters, the sequence should begin with numbers ascending, then letters alphabetically.
            The test has 12 sequences with 2 practice trials first. 
            Audio and visual feedback will be provided to help guide you.`;

        
       

          const utterance = new SpeechSynthesisUtterance(textToSpeech);
          utterance.volume = 0.5;
      
          img.classList.add("speaking");
      
          utterance.onend = () => {
            img.classList.remove("speaking");
          };
      
          window.speechSynthesis.speak(utterance);
        }
      </script>

    <main class="container">
        <div class="card">
            <div class="main__img--container">
                <img src="{% static 'images/audio.png' %}" alt="Audio icon" id="tts_image" onclick="handleTTSClick()">
            </div>
            <div class="header">
                <h1>Test Instructions</h1>
            </div>

            <div id="google_translate_element"></div>
            <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
            <script type="text/javascript">
                function googleTranslateElementInit() {
                  new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
                }
            </script>
            
            <div class="content">
              

                <div class="info-box">
                    <h3>Ordering Rules:</h3>
                    <ul>
                        <li>Order the numbers in <span class="emphasis">ascending order</span> (smallest to largest).
                        </li>
                        <li>When shown a mix of numbers and letters, the sequence should begin with <span
                                class="emphasis">numbers ascending</span> then <span class="emphasis">letters
                                alphabetically</span>.</li>
                    </ul>
                </div>

                <div class="info-box">
                    <h3>Example:</h3>
                    <div class="examples">
                        <div>
                            <p class="label">Mix of numbers and letters:</p>
                            <p class="code">Given: F 2 R 5</p>
                            <p class="code">Correct order: 2 5 F R</p>
                        </div>
                    </div>
                </div>

                <h2>Test Format</h2>
                <ul>
                    <li>The test has 12 sequences with 2 practice trials first.</li>
                    <li>Audio & Visual feedback will be provided to help guide you.</li>
                </ul>


                <div class="actions">
                    <button id="startTest">Proceed</button>
                </div>

                <script>
                    let url = "http://127.0.0.1:8000/PPST/testScreen/" + "{{ testId }}";
                    document.getElementById("startTest").addEventListener("click", function () {
                        window.speechSynthesis.cancel();
                        window.location.replace(url); // does not allow going back in browser history
                    });
                </script>
            </div>

    </main>
</body>

</html>